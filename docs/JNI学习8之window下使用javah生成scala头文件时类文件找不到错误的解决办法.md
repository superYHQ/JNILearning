更多代码请见：https://github.com/xubo245/JNILearning

0.环境：

	window7 64位
	scala2.10.4

1.类文件找不到错误：
scalac编译好scala成class后，javah生成head文件会报错：

D:\all\idea\HelloWorldJNIwithRegisterNatives-master\src\main\scala>javah 

-classp
ath D:/1win7/scala/lib;. -jni helloWindow
无法找到类型 'scala.reflect.ScalaSignature' 的注释方法 'bytes()': 找不到

scala.re
flect.ScalaSignature的类文件


解决办法：

	javah -classpath D:/1win7/scala/lib/*;. -jni helloWindow

其中classpath后面接包路径

也可以将需要的包放到当前目录：

	javah -classpath scala-reflect.jar;scala-library.jar;. -jni helloWindow

生成.h文件：
	
	 D:\all\idea\HelloWorldJNIwithRegisterNatives-master\src\main\scala 的目录
	2016/06/22  23:04    <DIR>          .
	2016/06/22  23:04    <DIR>          ..
	2016/06/22  22:59    <DIR>          bin
	2016/06/22  22:55             1,063 helloWindow$.class
	2016/06/22  22:55               830 helloWindow.class
	2016/06/22  23:04               254 helloWindow.h
	2016/06/22  22:55               303 helloWindow.scala
	2016/06/22  21:43    <DIR>          org
	2014/03/18  15:01         7,126,364 scala-library.jar
	2014/03/18  15:01         3,203,473 scala-reflect.jar

2.新问题：.h文件不正确：

	/* DO NOT EDIT THIS FILE - it is machine generated */
	#include <jni.h>
	/* Header for class helloWindow */
	
	#ifndef _Included_helloWindow
	#define _Included_helloWindow
	#ifdef __cplusplus
	extern "C" {
	#endif
	#ifdef __cplusplus
	}
	#endif
	#endif

scala中注解@native没有生效

解决办法：
	
	主要是@native声明需要在class里面，而不能在object里面，在object就会出现上面的问题。

重新编译

	D:\all\idea\HelloWorldJNIwithRegisterNatives-master\src\main\scala>scalac helloW
	indow.scala
	
	D:\all\idea\HelloWorldJNIwithRegisterNatives-master\src\main\scala>javah -classp
	ath D:/1win7/scala/lib/*;. -jni helloWindow

结果：

	/* DO NOT EDIT THIS FILE - it is machine generated */
	#include <jni.h>
	/* Header for class helloWindow */
	
	#ifndef _Included_helloWindow
	#define _Included_helloWindow
	#ifdef __cplusplus
	extern "C" {
	#endif
	/*
	 * Class:     helloWindow
	 * Method:    add
	 * Signature: (II)I
	 */
	JNIEXPORT jint JNICALL Java_helloWindow_add
	  (JNIEnv *, jobject, jint, jint);
	
	/*
	 * Class:     helloWindow
	 * Method:    hello
	 * Signature: ()Ljava/lang/String;
	 */
	JNIEXPORT jstring JNICALL Java_helloWindow_hello
	  (JNIEnv *, jobject);
	
	#ifdef __cplusplus
	}
	#endif
	#endif

scala文件代码：
	
	/**
	  * Created by xubo on 2016/6/22.
	  */
	
	class helloWindow {
	  @native
	  def add(a: Int, b: Int): Int
	
	  @native
	  def hello(): String
	}
	
	object helloWindow {
	  System.loadLibrary("helloWindow")
	  def main(args: Array[String]) {
	    val helloWindow1 = new helloWindow
	    println(helloWindow1.hello + ", 5 + 5 = " + helloWindow1.add(5, 5))
	  }
	}



参考：
【1】 http://www.cnblogs.com/liuling/p/2015-8-5-2.html